```java
public interface State {

    void action();
}
```

```java
public class RainyState implements State{
    private Activity activity;

    public RainyState(Activity activity) {
        this.activity = activity;
    }

    public void action() {
        System.out.println(System.currentTimeMillis()+"下雨了. "+activity+"内容改为室内活动.");
    }
}
```

```java
public class SunnyState implements State{
    private Activity activity;

    public SunnyState(Activity activity) {
        this.activity = activity;
    }

    public void action() {
        System.out.println(System.currentTimeMillis()+"天晴了. "+activity+"内容改为户外活动.");
    }
}
```

```java
public class Activity {
    private String activityTheme;
    private State state;

    public Activity(String activityTheme) {
        this.activityTheme = activityTheme;
        this.state = new SunnyState(this);
    }

    public State getState() {
        return state;
    }

    public void setState(State state) {
        this.state = state;
    }

    public void action() {
        state.action();
    }

    public void stateChanged() {
        if (state.getClass().equals(SunnyState.class)) {
            this.state = new RainyState(this);
        } else {
            this.state = new SunnyState(this);
        }
    }

    @Override
    public String toString() {
        return activityTheme;
    }
}
```

```java
@Test
    public void test3() throws InterruptedException {
        Activity activity = new Activity("XXX部门团建活动");
        for (int i = 0; i < 4; i++) {
            Thread.sleep(10);
            activity.stateChanged();
            activity.action();
        }
    }
```

```
1541691348450下雨了. XXX部门团建活动内容改为室内活动.
1541691348460天晴了. XXX部门团建活动内容改为户外活动.
1541691348471下雨了. XXX部门团建活动内容改为室内活动.
1541691348481天晴了. XXX部门团建活动内容改为户外活动.
```
